<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Popup</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link href="css/css-popup.css" rel="stylesheet" />
    <link href="css/popup-custom.css" rel="stylesheet" />
  </head>
  <body>
    <div id="wrapper">
      <div class="popup-wrapper" :style="{'padding-bottom': adsAccounts > 3 ? '30px' : '10px'}">
        <span class="popup-close" @click="close"
          ><i class="icon-close"></i
        ></span>
        <div class="popup-main__home">
          <div class="pmh-logo">
            <a href="/">
                <img src="images/logo.png" style="max-width: 260px" alt="AdHelper" />
            </a>
            <div v-if="storageToken">ID: {{ storageToken }}</div>
          </div>
          <div
            class="popup-sub"
            v-if="!onFBTab"
            @click="window.open('https://facebook.com')"
          >
            Go to <a href="#">Facebook.com</a> to start finding ads
          </div>
          <div class="popup-main" v-show="preview">
            <div class="pmh-switches">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="sw-show__ads"
                  v-model="showAds"
                  @click="flipShowAds"
                />
                <label class="form-check-label" for="sw-show__ads"
                  >Show Ads</label
                >
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="sw-auto__scroll"
                  v-model="autoScroll"
                  @click="flipAutoScroll"
                />
                <label class="form-check-label" for="sw-auto__scroll"
                  >Auto Scroll</label
                >
              </div>
            </div>
            <div class="pmh-activity">
              <div class="pmh-popup__title">Lifetime Activity</div>
              <div class="pmh-activity__main">
                <div class="pmh-activity__item">
                  <div class="pmh-activity__count">
                    {{ viewedAdsCount.toLocaleString() }}
                  </div>
                  <div class="pmh-activity__name">Ads Found</div>
                </div>
                <div class="pmh-activity__item">
                  <div class="pmh-activity__count">
                    {{ advertiserCount.toLocaleString() }}
                  </div>
                  <div class="pmh-activity__name">Advertisers Found</div>
                </div>
                <div class="pmh-activity__item">
                  <div class="pmh-activity__count">
                    {{ favoriteCount.toLocaleString() }}
                  </div>
                  <div class="pmh-activity__name">Favorite Ads</div>
                </div>
              </div>
            </div>
            <div class="pmh-activity">
              <div class="pmh-popup__title">Todayâ€™s Activity</div>
              <div class="pmh-activity__main">
                <div class="pmh-activity__item">
                  <div class="pmh-activity__count">
                    {{ dailyViewedAdsCount.toLocaleString() }}
                  </div>
                  <div class="pmh-activity__name">Ads Found</div>
                </div>
                <div class="pmh-activity__item">
                  <div class="pmh-activity__count">
                    {{ dailyAdvertiserCount.toLocaleString() }}
                  </div>
                  <div class="pmh-activity__name">Advertisers Found</div>
                </div>
                <div class="pmh-activity__item">
                  <div class="pmh-activity__count">
                    {{ dailyFavoriteCount.toLocaleString() }}
                  </div>
                  <div class="pmh-activity__name">Favorite Ads</div>
                </div>
              </div>
            </div>
            <a class="btn-see" :href="`${BASE_URL}/?token=${extensionToken}`" title="See Collected Ads" v-if="extensionToken" @click.prevent="seeCollectedAds">See Collected Ads</a
            >
          </div>
          <div class="pmh-list__account">
            <div class="pmh-popup__title">Your Ads Account</div>
            <table class="table popup-table table-borderless">
              <thead>
                <tr>
                  <th scope="col">Name</th>
                  <th scope="col">Threshold</th>
                  <th scope="col">Limit</th>
                  <th scope="col">Total spent</th>
                  <th scope="col">Currency</th>
                </tr>
              </thead>
              <tbody>
                <tr v-show="!computedAdsAccounts.length">
                  <td>
                    <div class="progress">
                      <div class="color"></div>
                    </div>
                  </td>
                  <td>
                    <div class="progress">
                      <div class="color"></div>
                    </div>
                  </td>
                  <td>
                    <div class="progress">
                      <div class="color"></div>
                    </div>
                  </td>
                  <td>
                    <div class="progress">
                      <div class="color"></div>
                    </div>
                  </td>
                  <td>
                    <div class="progress">
                      <div class="color"></div>
                    </div>
                  </td>
                </tr>
                <tr v-for="account in computedAdsAccounts" v-if="account">
                  <td><span>{{ account?.name }}</span></td>
                  <td>
                    <span>{{ threshold[account?.account_id] || 0 }}</span>
                  </td>
                  <td>
                    <span
                      >{{ (account?.adtrust_dsl || 0).toLocaleString() }}</span
                    >
                  </td>
                  <td><span>{{ calculateTotalSpent(account) }}</span></td>
                  <td><span>{{ account.currency }}</span></td>
                </tr>
              </tbody>
            </table>
            <div class="pagination" v-show="!preview">
              <a
                href="#"
                class="pagination-item"
                v-if="adsAccounts.length > 10"
                v-for="i in Math.ceil(adsAccounts.length / 10)"
                @click="switchPage(i)"
                :class="{ active: page == i }"
                >{{ i }}</a
              >
            </div>
            <div class="pmh-control">
              <a
                href="#"
                class="btn-view"
                @click="viewMore"
                id="viewMoreBtn"
                v-if="adsAccounts > 3"
              >
                <span>{{ preview ? 'View More' : 'View Less' }}</span>
                <i class="bi bi-chevron-down"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> -->
    <!-- <script src="js/bootstrap.bundle.min.js"></script> -->
    <script src="js/vue.js"></script>
    <script src="js/popup.js"></script>
  </body>
</html>
